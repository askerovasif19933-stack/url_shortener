# üîó URL Shortener (FastAPI + PostgreSQL + Redis)

<img width="619" height="582" alt="2025-12-17_02-40-43" src="https://github.com/user-attachments/assets/fbbd5e49-cad9-4490-b0a1-b7ff3de882aa" />


–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è URL-–∞–¥—Ä–µ—Å–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **FastAPI**, **PostgreSQL** –∏ **Redis**.  
–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π —á–µ—Ä–µ–∑ **Docker Compose** –∏ –ø–æ–¥—Ö–æ–¥–∏—Ç –∫–∞–∫ —É—á–µ–±–Ω—ã–π / pet-–ø—Ä–æ–µ–∫—Ç –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è backend-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –ï—Å—Ç—å –∫—Ä–∞—Ç–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å–≤–æ –≤ —Ñ–∞–π–ª–µ manual

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å—Å—ã–ª–æ–∫ –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö URL
- –†–µ–¥–∏—Ä–µ–∫—Ç –ø–æ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–µ (`302`)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ **Redis** –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞
- –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö URL
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ë–î (SQLAlchemy + asyncpg)
- Unit- –∏ API-—Ç–µ—Å—Ç—ã (`pytest`)
- –ü–æ–ª–Ω–∞—è Docker-–æ–∫—Ä—É–∂–µ–Ω–∏–µ ‚Äú–∏–∑ –∫–æ—Ä–æ–±–∫–∏‚Äù

---

## üß± –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.12**
- **FastAPI**
- **SQLAlchemy (async)**
- **PostgreSQL**
- **Redis**
- **Uvicorn**
- **Docker / Docker Compose**
- **pytest + httpx**

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:

env
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=short_urls

DATABASE_URL=postgresql+asyncpg://postgres:postgres@db:5432/short_urls
REDIS_HOST=redis
REDIS_PORT=6379

## üê≥ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–¢—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Docker –∏ Docker Compose.

docker compose up --build


–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

API: http://127.0.0.1:8000

PostgreSQL: localhost:6432

Redis: localhost:6379

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ Redis —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## üîÅ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
–°–æ–∑–¥–∞—Ç—å –∫–æ—Ä–æ—Ç–∫—É—é —Å—Å—ã–ª–∫—É
POST /short_url
Content-Type: application/json

{
  "long_url": "https://www.youtube.com/watch?v=qe--uV1qJMI"
}


–û—Ç–≤–µ—Ç:

{
  "slug": "LRw1Pj"
}

–ü–µ—Ä–µ–π—Ç–∏ –ø–æ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–µ
GET /LRw1Pj


–ü—Ä–æ–∏–∑–æ–π–¥—ë—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç (302) –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URL.

## üß† –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)

–ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –ø–æ slug —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è Redis

–ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ—Ç ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –≤ PostgreSQL

–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ Redis —Å TTL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1 —á–∞—Å)

–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –ë–î –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

–¢–∞–∫–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:
–µ—Å–ª–∏ –¥–ª–∏–Ω–Ω—ã–π URL —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –±–∞–∑–µ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π slug.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:

Unit-—Ç–µ—Å—Ç—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

API-—Ç–µ—Å—Ç—ã FastAPI –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

pytest


–í–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–ë–î, Redis) –≤ —Ç–µ—Å—Ç–∞—Ö –∑–∞–º–æ–∫–∞–Ω—ã.

üåê –ü—Ä–æ –¥–æ–º–µ–Ω

–ê–¥—Ä–µ—Å –≤–∏–¥–∞:

http://127.0.0.1:8000/LRw1Pj


–≥–¥–µ:

127.0.0.1:8000 ‚Äî –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞

LRw1Pj ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è:

—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–æ–º–µ–Ω

—Å–µ—Ä–≤–µ—Ä –∏–ª–∏ –æ–±–ª–∞—á–Ω—ã–π —Ö–æ—Å—Ç–∏–Ω–≥

–ø—Ä–æ–∫—Å–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Nginx)

üìå –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ò–∑—É—á–µ–Ω–∏–µ FastAPI –∏ async Python

–ü—Ä–∞–∫—Ç–∏–∫–∞ Docker –∏ Docker Compose

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è backend-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–û—Å–Ω–æ–≤–∞ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
